document.addEventListener("DOMContentLoaded",(function(){function e(e){let t=[];for(let i=0;i<e.files.length;i++)t[i]=e.files[i].name;$(e).parent().attr("title",t.toString()),$(e).siblings(".form-file__quantity").children(".form-file__number").text(e.files.length),$(e).siblings(".form-file__quantity").addClass("_active")}if($('.js-form button[type="submit"]').click((function(e){$(this).parents("form").find(":input[name]").each((function(e,t){this.required&&("tel"===t.type&&0===$(t).mask("+7 (999) 999-99-99").val().length||0===t.value.length)&&($(t).focus((function(){$(this).parent().removeClass("_required"),$(t).next().hide(0),$(t).siblings(".form-field__text").hide(0),$(t).siblings(".form-field__error").hide(0)})),$(t).parent().addClass("_required"),$(t).next().fadeIn(0),$(t).next().text($(t).next().data("valid")),$(t).siblings(".form-field__error").fadeIn(0))}))})),$(".form-field__input").each((function(e,t){0!==t.value.length&&$(t).next().hide(0)})),$(".form-field__input").click((function(){this.required?($(this).next().fadeOut(250),$(this).siblings(".form-field__check").fadeOut(150),$(this).siblings(".form-field__error").fadeOut(150),$(this).parent().removeClass("_required")):"number"===this.type?($(this).siblings(".form-field__error").fadeOut(150),$(this).parent().removeClass("_required"),$(this).next().fadeOut(250)):$(this).next().fadeOut(250)})),$(".form-field__input").focus((function(){this.required?($(this).next().fadeOut(250),$(this).parent().removeClass("_required"),$(this).siblings(".form-field__check").fadeOut(150),$(this).siblings(".form-field__error").fadeOut(150)):$(this).next().fadeOut(250)})),$(".form-field__input").change((function(){"tel"!==this.type&&(this.required?($(this).next().fadeOut(250),$(this).parent().removeClass("_required"),$(this).siblings(".form-field__check").fadeOut(150),$(this).siblings(".form-field__error").fadeOut(150)):$(this).next().fadeOut(250))})),$(".form-field__input").focusout((function(){"text"===this.type&&0===this.value.length||"tel"===this.type&&0===$(this).mask("+7 (999) 999-99-99").val().length||"password"===this.type&&0===this.value.length?this.required?($(this).parent().addClass("_required"),$(this).next().fadeIn(250),$(this).next().text($(this).next().data("valid")),$(this).siblings(".form-field__error").fadeIn(250)):$(this).next().fadeIn(250):"email"===this.type?0===this.value.length?this.required?($(this).parent().addClass("_required"),$(this).next().fadeIn(250),$(this).next().text($(this).next().data("valid")),$(this).siblings(".form-field__error").fadeIn(250)):($(this).next().fadeIn(250),$(this).siblings(".form-field__check").hide()):this.validity.valid?($(this).parent().removeClass("_required"),$(this).siblings(".form-field__error").fadeOut(250),$(this).siblings(".form-field__check").fadeIn(250)):($(this).parent().addClass("_required"),$(this).siblings(".form-field__error").fadeIn(250)):"number"===this.type?this.required?this.validity.valid||(this.value="",$(this).parent().addClass("_required"),$(this).next().fadeIn(250),$(this).next().text(this.validationMessage),$(this).siblings(".form-field__error").fadeIn(250)):this.validity.valid?0===this.value.length&&$(this).next().fadeIn(250):(this.value="",$(this).parent().addClass("_required"),$(this).next().fadeIn(250),$(this).next().text("Укажите число"),$(this).siblings(".form-field__error").fadeIn(250)):($(this).parent().removeClass("_required"),$(this).siblings(".form-field__error").fadeOut(250),$(this).siblings(".form-field__check").fadeIn(250))})),$(".form-file__input").change((function(){console.log(this),e(this)})),$(".form-file__input").each((function(t,i){i.files.length>=1&&e(i)})),$(".form-phone").mask("+7 (999) 999-99-99"),$(".form-textarea__input").each((function(e,t){0!==t.value.length&&$(t).next().hide(0)})),$(".form-textarea__input").click((function(){this.required?($(this).next().fadeOut(250),$(this).parent().removeClass("_required")):$(this).next().fadeOut(250)})),$(".form-textarea__input").focus((function(){this.required?($(this).next().fadeOut(250),$(this).parent().removeClass("_required")):$(this).next().fadeOut(250)})),$(".form-textarea__input").change((function(){this.required?($(this).next().fadeOut(250),$(this).parent().removeClass("_required")):$(this).next().fadeOut(250)})),$(".form-textarea__input").focusout((function(){0===this.value.length?this.required?($(this).parent().addClass("_required"),$(this).next().fadeIn(250),$(this).next().text($(this).next().data("valid"))):$(this).next().fadeIn(250):($(this).parent().removeClass("_required"),$(this).next().fadeOut(250))})),$(".js-form").submit((function(){const e=$(this);e.find("button").prop("disabled",!0),e.find(".form-send__message").fadeIn(350);var t=new FormData;return e.find(":input[name]").each((function(e,i){if("file"==i.type&&i.multiple){var n=i.files;for(e=0;e<n.length;e++)t.append("files[]",n[e])}else if("file"==i.type)t.append($(i).attr("name"),$(i).prop("files")[0]);else{var s=$(this);s.val()&&t.append(s.attr("name"),s.val())}})),$.ajax({url:"form/form.php",type:"POST",data:t,contentType:!1,cache:!1,processData:!1,success:function(t){e.find(".form-send__loading").hide(),e.find(".form-send__success").show(),e.trigger("reset"),e.find(":input[name]").each((function(e,t){t.required&&$(t).next().html($(t).next().data("default"))})),$(".form-field__text").fadeIn(250),$(".form-textarea").removeClass("_required"),$(".form-field").removeClass("_required"),$(".form-field__check").hide(0),$(".form-field__error").hide(0),setTimeout((function(){e.find(".form-send__message").fadeOut()}),3500),e.find("button").prop("disabled",!1)},error:function(t,i,n){e.find(".form-send__loading").hide(),e.find(".form-send__error").show(),setTimeout((function(){e.find(".form-send__message").fadeOut()}),3500),e.find("button").prop("disabled",!1)}}),!1})),"loading"in HTMLImageElement.prototype){document.querySelectorAll("img.lazy").forEach(e=>{e.src=e.dataset.src})}else{(new LazyLoad).update()}function t(e){return 1===e.parents("body").find(".modal:visible").length}$(".menu-toggle").on("click",(function(){$(".menu").toggleClass("_active"),$(this).toggleClass("_active")})),$(".menu a").click((function(){$(".menu").toggleClass("_active"),$(".menu-toggle").toggleClass("_active")})),$("[data-modal-open]").on("click",(function(){const e=$(this).data("modal-open");if($("#"+e).fadeIn(500),setTimeout((function(){$("body").css("overflow","hidden")}),500),"modal-video"==e){let t;t=$(this).data("video-src")?$(this).data("video-src"):$("#"+e).find(".modal-video__box").data("video-src"),$("#"+e).find(".modal-video__frame").length?$("#"+e).find(".modal-video__frame").attr("src",t):(console.log($("#"+e).find(".modal-video__frame").length),$("#"+e).find(".modal-video__box").html(' <iframe class="modal-video__frame" src="'+t+'" title="YouTube video player" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>'))}})),$(".modal__close").click((function(){const e=$(this);setTimeout((function(){e.parents(".modal").fadeOut(500)}),150),t($(this).parents(".modal"))&&$("body").css("overflow",""),setTimeout((function(){"modal-video"==e.parents(".modal")[0].id&&e.parents(".modal").find(".modal-video__frame").attr("src","")}),650)})),$(".modal").mouseup((function(e){const i=$(this),n=$(this).find(".modal__box");0!=i.data("modal-target")&&(n.is(e.target)||0!==n.has(e.target).length||(setTimeout((function(){i.fadeOut(500)}),150),t(i)&&$("body").css("overflow","")))})),$(".scroll").click((function(){var e=$(this).attr("href");return $("html, body").animate({scrollTop:$(e).offset().top+parseInt($(e).css("padding-top"))-20+"px"}),!1})),$(".questions-item__header").on("click",(function(){"accordion"===$(this).parents(".questions").data("questions")?($(this).parent().siblings().children(".questions-item__body").slideUp(250),$(this).parent().siblings().children(".questions-item__header").removeClass("_active"),$(this).next().slideToggle(250),$(this).toggleClass("_active")):($(this).next().slideToggle(250),$(this).toggleClass("_active"))}));new Swiper(".template-slider",{slidesPerView:1,spaceBetween:25,watchOverflow:!0,initialSlide:5,simulateTouch:!1,nested:!0,navigation:{nextEl:".template-slider-btn.swiper-button-next",prevEl:".template-slider-btn.swiper-button-prev"},pagination:{el:".template-pagination",type:"bullets",clickable:!0}}),new Swiper(".slider-1",{slidesPerView:1,spaceBetween:25,watchOverflow:!0,initialSlide:1,autoHeight:!0,navigation:{nextEl:".slider-1 .swiper-button-next",prevEl:".slider-1 .swiper-button-prev"}}),new Swiper(".slider-2",{slidesPerView:1,spaceBetween:25,watchOverflow:!0,autoHeight:!0,pagination:{el:".swiper-pagination",type:"bullets",clickable:!0}}),new Swiper(".slider-2-1",{slidesPerView:1,spaceBetween:25,watchOverflow:!0,autoHeight:!0,pagination:{el:".swiper-pagination",type:"bullets",dynamicBullets:!0,clickable:!0}}),new Swiper(".slider-3",{slidesPerView:1,spaceBetween:25,watchOverflow:!0,autoHeight:!0,pagination:{el:".swiper-pagination",type:"fraction"}}),new Swiper(".slider-4",{slidesPerView:1,spaceBetween:25,watchOverflow:!0,autoHeight:!0,pagination:{el:".swiper-pagination",type:"progressbar"}}),new Swiper(".slider-5",{slidesPerView:1,spaceBetween:25,watchOverflow:!0,autoHeight:!0,pagination:{el:".swiper-pagination",clickable:!0,renderBullet:function(e,t){return'<span class="'+t+'">'+(e+1)+"</span>"}}}),new Swiper(".slider-6",{slidesPerView:1,spaceBetween:25,watchOverflow:!0,autoHeight:!0,pagination:{el:".swiper-pagination",type:"progressbar"},navigation:{nextEl:".slider-6 .swiper-button-next",prevEl:".slider-6 .swiper-button-prev"}}),new Swiper(".slider-7",{slidesPerView:1,spaceBetween:25,watchOverflow:!0,autoHeight:!0,pagination:{el:".swiper-pagination",type:"fraction"},navigation:{nextEl:".slider-7 .swiper-button-next",prevEl:".slider-7 .swiper-button-prev"}});setTimeout((function(){}),1e3),(new WOW).init()}));